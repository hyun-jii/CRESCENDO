<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--  namespace는 패키지 경로를 포함한 전체이름을 가진 구문을 구분하기 위해 필수로 사용해야한다.
	  namespace는 인터페이스 바인딩을 가능하게 한다.
	  
	  
	  
 -->
 
<!--  namespace는 DAO인터페이스의 경로를 적어줌
 이유 : dao인터페이스에 선언된 메소드 이름과 여기 id값을  매핑시켜야 하기 때문 
 즉, 작업해야하는 dao인터페이스의 패키지명을 적어줘야한다. --> 
 
<mapper namespace="com.crescendo.spring.admin.model.dao.faq.IFaqDAO">

<!--  FAQ  -->

	<resultMap type="FaqVO" id="FaqResultSet">
		<id column="H_NUM" property="hNum"/>
		<result column="ADMIN_NUM" property="adminNum"/>
		<result column="H_TITLE" property="hTitle"/>
		<result column="H_CONTENT" property="hContent"/>
		<result column="H_DATE" property="hDate"/>
	</resultMap>	

	<!--  FAQ 출력 -->
	<select id="faqList" resultType="FaqVO">
		SELECT H_NUM ,H_TITLE,TO_CHAR(H_DATE,'YYYY-MM-DD') AS H_DATE, H_CONTENT,ADMIN_NUM
		FROM TBL_HELP
		ORDER BY H_NUM DESC, H_DATE DESC
	</select>
	
	<!--  FAQ 글 삭제 -->
	<delete id="deleteFaq">
		DELETE 
		FROM TBL_HELP
		WHERE H_NUM=#{hNum}
	</delete>
	
	
	<!-- FAQ insert하는 부분 -->
	<insert id="insertFaq">
		INSERT INTO TBL_HELP (H_NUM, ADMIN_NUM,H_TITLE,H_CONTENT,H_DATE)
		VALUES(SEQ_HELP.NEXTVAL,2,#{hTitle},#{hContent},SYSDATE)
	</insert>
	
	
	
	<!-- 공지사항 확인 폼에 데이터 보내기 -->
	<select id="faqConfirm" resultType="FaqVO">
		SELECT H_TITLE,H_CONTENT,H_DATE
		FROM TBL_HELP
		WHERE H_NUM = #{hNum} 
	</select>
	
	<!-- 공지사항 엡데이트 폼에 데이터 보내기 -->
	<select id="updateFaqConfirm" resultType="FaqVO">
		SELECT H_TITLE, H_CONTENT, H_NUM
		FROM TBL_HELP
		WHERE H_NUM = #{hNum} 
	</select>
	
	
	<!-- 공지사항 update 하는 구문 -->
	<update id="updateFaq" >
		UPDATE TBL_HELP
		SET H_TITLE=#{hTitle},H_CONTENT=#{hContent},H_DATE=SYSDATE
		WHERE H_NUM=#{hNum}
	</update>
	
	

</mapper>